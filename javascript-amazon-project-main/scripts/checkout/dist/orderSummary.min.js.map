{"version":3,"sources":["orderSummary.js"],"names":["_cart","require","_products","_money","_helloEsm","_index","_interopRequireDefault","_deliveryOptions","_paymentSummary","renderOrderSummary","cartSummaryHTML","cart","forEach","cartItem","productId","matchingProduct","getProduct","deliveryOptionId","deliveryOption","getDeliveryOption","dateString","add","deliveryDays","format","image","deliveryDate","formatCurrency","priceCents","id","quantity","html","deliveryOptions","priceString","concat","isChecked","deliveryOptionsHTML","dataset","document","querySelector","innerHTML","querySelectorAll","link","addEventListener","removeFromCart","remove","renderPaymentSummary","element","_element$dataset","updateDeliveryOption"],"mappings":"kHAAA,IAAAA,MAAAC,QAAA,sBACAC,UAAAD,QAAA,0BACAE,OAAAF,QAAA,qBACAG,UAAAH,QAAA,uDACAI,OAAAC,uBAAAL,QAAA,iDACAM,iBAAAN,QAAA,iCACAO,gBAAAP,QAAA,+FAEO,SAASQ,qBAPhB,IAAAC,EAAA,GACAC,MAAAA,KAAAC,QAAA,SAAAC,GAUI,IAAMC,EAAYD,EAASC,UAErBC,GAAkB,EAAAb,UAAAc,YAAWF,GAE7BG,EAAmBJ,EAASI,iBAE5BC,GAAiB,EAAAX,iBAAAY,mBAAkBF,GAOnCG,GALQ,EAAAf,OAAA,WACagB,IACzBH,EAAeI,aAdd,QAiB6BC,OAdlCZ,gBAKED,GAAMO,kGAAAA,OAKqBI,EACzBH,GANID,8EAAAA,OAaSG,EAbTH,4HAAAA,OAyDNF,EAAAS,MAzDMP,uHAAAA,OA6DEQ,EACJP,KA9DED,8FAAAA,QAuEW,EAAAd,OAAAuB,gBAAiBX,EAAgBY,YAvE5CV,+FAAAA,OA2DNF,EAAAa,GA3DMX,6FAAAA,OA2FNJ,EAAAgB,SA3FMZ,kQAAAA,OAiG+BF,EAAAa,GAjG/BX,uBAAAA,OAiG+BF,EAAAa,GAjG/BX,wSAAAA,OAuHT,SAAAF,EAAAF,GA9DG,IAAIiB,EAAO,GAkCX,OAhCAC,iBAAAA,gBAAgBnB,QAAQ,SAACM,GACvB,IAKME,GALQ,EAAAf,OAAA,WACagB,IACzBH,EAAeI,aACf,QAE8BC,OAC9B,gBAGIS,EAA4C,IAA9Bd,EAAeS,WAAmB,OAAlC,IAAAM,QAA+C,EAAA9B,OAAAuB,gBAAeR,EAAeS,YAA7E,MAEdO,EAAYhB,EAAeU,KAAOf,EAASI,iBAEjDa,GAAI,mFAAAG,OAEelB,EAAgBa,GAF/B,+BAAAK,OAE+Df,EAAeU,GAF9E,6CAAAK,OAIAC,EAAY,UAAY,GAJxB,mEAAAD,OAKoDlB,EAAgBa,GALpE,iFAAAK,OAQIb,EARJ,mFAAAa,OAWID,EAXJ,uEAkBCF,EAqBmCK,CACQC,EADRvB,GAhHpCI,4EA8FRoB,SAASC,cAAc,qBAAqBC,UAAY7B,EAExD2B,SAASG,iBAAiB,mBAAmB5B,QAAQ,SAAC6B,GACpDA,EAAKC,iBAAiB,QAAS,WAC7B,IAAM5B,EAAY2B,EAAKL,QAAQtB,WAC/B,EAAAd,MAAA2C,gBAAe7B,GAEGuB,SAASC,cAAT,2BAAAL,OACWnB,IAEnB8B,UAEV,EAAApC,gBAAAqC,4BAIJR,SAASG,iBAAiB,uBACvB5B,QAAQ,SAACkC,GACRA,EAAQJ,iBAAiB,QAAS,WAAM,IAAAK,EACAD,EAAQV,QAAvCtB,EAD+BiC,EAC/BjC,UAAWG,EADoB8B,EACpB9B,kBAClB,EAAAjB,MAAAgD,sBAAqBlC,EAAWG,GAChCR,sBACA,EAAAD,gBAAAqC","file":"orderSummary.min.js","sourcesContent":["import {cart, removeFromCart, updateDeliveryOption} from '../../data/cart.js';\r\nimport { products, getProduct } from '../../data/products.js';\r\nimport {formatCurrency} from '../utils/money.js';\r\nimport {hello} from 'https://unpkg.com/supersimpledev@1.0.1/hello.esm.js';\r\nimport dayjs from 'https://unpkg.com/dayjs@1.11.10/esm/index.js';\r\nimport {deliveryOptions, getDeliveryOption} from '../../data/deliveryOptions.js';\r\nimport {renderPaymentSummary} from './paymentSummary.js';\r\n\r\nexport function renderOrderSummary() {\r\n  let cartSummaryHTML = '';\r\n\r\n  cart.forEach((cartItem) => {\r\n    const productId = cartItem.productId;\r\n\r\n    const matchingProduct = getProduct(productId);\r\n\r\n    const deliveryOptionId = cartItem.deliveryOptionId;\r\n\r\n    const deliveryOption = getDeliveryOption(deliveryOptionId);\r\n\r\n    const today = dayjs();\r\n    const deliveryDate = today.add(\r\n      deliveryOption.deliveryDays,\r\n      'days'\r\n    );\r\n    const dateString = deliveryDate.format(\r\n      'dddd, MMMM D'\r\n    );\r\n\r\n    cartSummaryHTML += `\r\n    <div class=\"cart-item-container \r\n    js-cart-item-container\r\n    js-cart-item-container-${matchingProduct.id}\">\r\n            <div class=\"delivery-date\">\r\n              Delivery date: ${dateString}\r\n            </div>\r\n\r\n            <div class=\"cart-item-details-grid\">\r\n              <img class=\"product-image\" src=\"${matchingProduct.image}\">\r\n\r\n              <div class=\"cart-item-details\">\r\n                <div class=\"product-name\">\r\n                  ${matchingProduct.name}\r\n                </div>\r\n                <div class=\"product-price\">\r\n                  $${formatCurrency(matchingProduct.priceCents)}\r\n                </div>\r\n                <div class=\"product-quantity js-product-quantity-${matchingProduct.id}\">\r\n                  <span>\r\n                    Quantity: <span class=\"quantity-label\">${cartItem.quantity}</span>\r\n                  </span>\r\n                  <span class=\"update-quantity-link link-primary\">\r\n                    Update\r\n                  </span>\r\n                  <span class=\"delete-quantity-link link-primary js-delete-link js-delete-link-${matchingProduct.id}\" data-product-id=\"${matchingProduct.id}\">\r\n                    Delete\r\n                  </span>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"delivery-options\">\r\n                <div class=\"delivery-options-title\">\r\n                  Choose a delivery option:\r\n                </div>\r\n                ${deliveryOptionsHTML(matchingProduct, cartItem)}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n      `;\r\n  });\r\n\r\n  function deliveryOptionsHTML(matchingProduct, cartItem) {\r\n    let html = '';\r\n\r\n    deliveryOptions.forEach((deliveryOption) => {\r\n      const today = dayjs();\r\n      const deliveryDate = today.add(\r\n        deliveryOption.deliveryDays,\r\n        'days'\r\n      );\r\n      const dateString = deliveryDate.format(\r\n        'dddd, MMMM D'\r\n      );\r\n      \r\n      const priceString = deliveryOption.priceCents === 0 ? 'FREE' : `$${formatCurrency(deliveryOption.priceCents)} -`;\r\n\r\n      const isChecked = deliveryOption.id === cartItem.deliveryOptionId;\r\n\r\n      html += `\r\n      <div class=\"delivery-option js-delivery-option\"\r\n      data-product-id=\"${matchingProduct.id}\" data-delivery-option-id=\"${deliveryOption.id}\">\r\n        <input type=\"radio\"\r\n        ${isChecked ? 'checked' : ''} \r\n        class=\"delivery-option-input\" name=\"delivery-option-${matchingProduct.id}\">\r\n        <div>\r\n          <div class=\"delivery-option-date\">\r\n            ${dateString}\r\n          </div>\r\n          <div class=\"delivery-option-price\">\r\n            ${priceString} Shipping\r\n          </div>\r\n        </div>\r\n      </div>\r\n      `\r\n    });\r\n\r\n    return html;\r\n  }\r\n\r\n  document.querySelector('.js-order-summary').innerHTML = cartSummaryHTML;\r\n\r\n  document.querySelectorAll('.js-delete-link').forEach((link) => {\r\n    link.addEventListener('click', () => {\r\n      const productId = link.dataset.productId;\r\n      removeFromCart(productId);\r\n\r\n      const container = document.querySelector(\r\n        `.js-cart-item-container-${productId}`\r\n      );\r\n      container.remove();\r\n\r\n      renderPaymentSummary();\r\n    });\r\n  });\r\n\r\n  document.querySelectorAll('.js-delivery-option')\r\n    .forEach((element) => {\r\n      element.addEventListener('click', () => {\r\n        const {productId, deliveryOptionId} = element.dataset;\r\n        updateDeliveryOption(productId, deliveryOptionId);\r\n        renderOrderSummary();\r\n        renderPaymentSummary();\r\n      });\r\n    });\r\n}\r\n"]}