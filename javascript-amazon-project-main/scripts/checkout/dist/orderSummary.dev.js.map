{"version":3,"sources":["orderSummary.js"],"names":["renderOrderSummary","cartSummaryHTML","cart","forEach","cartItem","productId","matchingProduct","deliveryOptionId","deliveryOption","today","deliveryDate","add","deliveryDays","dateString","format","id","image","name","getPrice","quantity","deliveryOptionsHTML","html","deliveryOptions","priceString","priceCents","isChecked","document","querySelector","innerHTML","querySelectorAll","link","addEventListener","dataset","container","remove","element"],"mappings":"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","sourcesContent":["import {cart, removeFromCart, updateDeliveryOption} from '../../data/cart.js';\r\nimport { products, getProduct } from '../../data/products.js';\r\nimport {formatCurrency} from '../utils/money.js';\r\nimport {hello} from 'https://unpkg.com/supersimpledev@1.0.1/hello.esm.js';\r\nimport dayjs from 'https://unpkg.com/dayjs@1.11.10/esm/index.js';\r\nimport {deliveryOptions, getDeliveryOption} from '../../data/deliveryOptions.js';\r\nimport {renderPaymentSummary} from './paymentSummary.js';\r\n\r\nexport function renderOrderSummary() {\r\n  let cartSummaryHTML = '';\r\n\r\n  cart.forEach((cartItem) => {\r\n    const productId = cartItem.productId;\r\n\r\n    const matchingProduct = getProduct(productId);\r\n\r\n    const deliveryOptionId = cartItem.deliveryOptionId;\r\n\r\n    const deliveryOption = getDeliveryOption(deliveryOptionId);\r\n\r\n    const today = dayjs();\r\n    const deliveryDate = today.add(\r\n      deliveryOption.deliveryDays,\r\n      'days'\r\n    );\r\n    const dateString = deliveryDate.format(\r\n      'dddd, MMMM D'\r\n    );\r\n\r\n    cartSummaryHTML += `\r\n    <div class=\"cart-item-container \r\n    js-cart-item-container\r\n    js-cart-item-container-${matchingProduct.id}\">\r\n            <div class=\"delivery-date\">\r\n              Delivery date: ${dateString}\r\n            </div>\r\n\r\n            <div class=\"cart-item-details-grid\">\r\n              <img class=\"product-image\" src=\"${matchingProduct.image}\">\r\n\r\n              <div class=\"cart-item-details\">\r\n                <div class=\"product-name\">\r\n                  ${matchingProduct.name}\r\n                </div>\r\n                <div class=\"product-price\">\r\n                  ${matchingProduct.getPrice()}\r\n                </div>\r\n                <div class=\"product-quantity js-product-quantity-${matchingProduct.id}\">\r\n                  <span>\r\n                    Quantity: <span class=\"quantity-label\">${cartItem.quantity}</span>\r\n                  </span>\r\n                  <span class=\"update-quantity-link link-primary\">\r\n                    Update\r\n                  </span>\r\n                  <span class=\"delete-quantity-link link-primary js-delete-link js-delete-link-${matchingProduct.id}\" data-product-id=\"${matchingProduct.id}\">\r\n                    Delete\r\n                  </span>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"delivery-options\">\r\n                <div class=\"delivery-options-title\">\r\n                  Choose a delivery option:\r\n                </div>\r\n                ${deliveryOptionsHTML(matchingProduct, cartItem)}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n      `;\r\n  });\r\n\r\n  function deliveryOptionsHTML(matchingProduct, cartItem) {\r\n    let html = '';\r\n\r\n    deliveryOptions.forEach((deliveryOption) => {\r\n      const today = dayjs();\r\n      const deliveryDate = today.add(\r\n        deliveryOption.deliveryDays,\r\n        'days'\r\n      );\r\n      const dateString = deliveryDate.format(\r\n        'dddd, MMMM D'\r\n      );\r\n      \r\n      const priceString = deliveryOption.priceCents === 0 ? 'FREE' : `$${formatCurrency(deliveryOption.priceCents)} -`;\r\n\r\n      const isChecked = deliveryOption.id === cartItem.deliveryOptionId;\r\n\r\n      html += `\r\n      <div class=\"delivery-option js-delivery-option\"\r\n      data-product-id=\"${matchingProduct.id}\" data-delivery-option-id=\"${deliveryOption.id}\">\r\n        <input type=\"radio\"\r\n        ${isChecked ? 'checked' : ''} \r\n        class=\"delivery-option-input\" name=\"delivery-option-${matchingProduct.id}\">\r\n        <div>\r\n          <div class=\"delivery-option-date\">\r\n            ${dateString}\r\n          </div>\r\n          <div class=\"delivery-option-price\">\r\n            ${priceString} Shipping\r\n          </div>\r\n        </div>\r\n      </div>\r\n      `\r\n    });\r\n\r\n    return html;\r\n  }\r\n\r\n  document.querySelector('.js-order-summary').innerHTML = cartSummaryHTML;\r\n\r\n  document.querySelectorAll('.js-delete-link').forEach((link) => {\r\n    link.addEventListener('click', () => {\r\n      const productId = link.dataset.productId;\r\n      removeFromCart(productId);\r\n\r\n      const container = document.querySelector(\r\n        `.js-cart-item-container-${productId}`\r\n      );\r\n      container.remove();\r\n\r\n      renderPaymentSummary();\r\n    });\r\n  });\r\n\r\n  document.querySelectorAll('.js-delivery-option')\r\n    .forEach((element) => {\r\n      element.addEventListener('click', () => {\r\n        const {productId, deliveryOptionId} = element.dataset;\r\n        updateDeliveryOption(productId, deliveryOptionId);\r\n        renderOrderSummary();\r\n        renderPaymentSummary();\r\n      });\r\n    });\r\n}\r\n"],"file":"orderSummary.dev.js"}