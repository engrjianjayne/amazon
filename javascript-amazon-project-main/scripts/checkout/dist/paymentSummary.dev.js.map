{"version":3,"sources":["paymentSummary.js"],"names":["renderPaymentSummary","productPriceCents","shippingPriceCents","cart","forEach","cartItem","product","productId","priceCents","quantity","deliveryOption","deliveryOptionId","totalBeforeTaxCents","taxCents","totalCents","paymentSummaryHTML","document","querySelector","innerHTML","addEventListener","fetch","method","headers","body","JSON","stringify","response","json","order","console","log","window","location","href"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AAEO,SAASA,oBAAT,GAAgC;AACrC,MAAIC,iBAAiB,GAAG,CAAxB;AACA,MAAIC,kBAAkB,GAAG,CAAzB;;AAGAC,aAAKC,OAAL,CAAa,UAACC,QAAD,EAAc;AACzB,QAAMC,OAAO,GAAG,0BAAWD,QAAQ,CAACE,SAApB,CAAhB;AACAN,IAAAA,iBAAiB,IAAIK,OAAO,CAACE,UAAR,GAAqBH,QAAQ,CAACI,QAAnD;AAEA,QAAMC,cAAc,GAAG,wCAAkBL,QAAQ,CAACM,gBAA3B,CAAvB;AACAT,IAAAA,kBAAkB,IAAIQ,cAAc,CAACF,UAArC;AACD,GAND;;AAQA,MAAMI,mBAAmB,GAAGX,iBAAiB,GAAGC,kBAAhD;AACA,MAAMW,QAAQ,GAAGD,mBAAmB,GAAG,GAAvC;AACA,MAAME,UAAU,GAAGF,mBAAmB,GAAGC,QAAzC;AAEA,MAAME,kBAAkB,uNAQjB,2BAAed,iBAAf,CARiB,0KAclB,2BAAeC,kBAAf,CAdkB,iLAoBjB,2BAAeU,mBAAf,CApBiB,uKA0BjB,2BAAeC,QAAf,CA1BiB,2KAgCf,2BAAeC,UAAf,CAhCe,kKAAxB;AAyCAE,EAAAA,QAAQ,CAACC,aAAT,CAAuB,qBAAvB,EACGC,SADH,GACeH,kBADf;AAGAC,EAAAA,QAAQ,CAACC,aAAT,CAAuB,iBAAvB,EACGE,gBADH,CACoB,OADpB,EAC6B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4CAEAC,KAAK,CAAC,uCAAD,EAA0C;AACpEC,cAAAA,MAAM,EAAE,MAD4D;AAEpEC,cAAAA,OAAO,EAAE;AACP,gCAAgB;AADT,eAF2D;AAKpEC,cAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBtB,gBAAAA,IAAI,EAAEA;AADa,eAAf;AAL8D,aAA1C,CAFL;;AAAA;AAEjBuB,YAAAA,QAFiB;AAAA;AAAA,4CAYHA,QAAQ,CAACC,IAAT,EAZG;;AAAA;AAYjBC,YAAAA,KAZiB;AAavB,kCAASA,KAAT;AAbuB;AAAA;;AAAA;AAAA;AAAA;AAgBvBC,YAAAA,OAAO,CAACC,GAAR,CAAY,oCAAZ;;AAhBuB;AAmBzBC,YAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,aAAvB;;AAnByB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAD7B;AAsBD","sourcesContent":["import {cart} from '../../data/cart.js';\r\nimport{getProduct} from '../../data/products.js';\r\nimport { getDeliveryOption } from '../../data/deliveryOptions.js';\r\nimport {formatCurrency} from '../utils/money.js';\r\nimport { addOrder } from '../../data/orders.js';\r\n\r\nexport function renderPaymentSummary() {\r\n  let productPriceCents = 0;\r\n  let shippingPriceCents = 0;\r\n\r\n\r\n  cart.forEach((cartItem) => {\r\n    const product = getProduct(cartItem.productId);\r\n    productPriceCents += product.priceCents * cartItem.quantity;\r\n\r\n    const deliveryOption = getDeliveryOption(cartItem.deliveryOptionId);\r\n    shippingPriceCents += deliveryOption.priceCents;\r\n  });\r\n\r\n  const totalBeforeTaxCents = productPriceCents + shippingPriceCents;\r\n  const taxCents = totalBeforeTaxCents * 0.1;\r\n  const totalCents = totalBeforeTaxCents + taxCents;\r\n\r\n  const paymentSummaryHTML = `\r\n    <div class=\"payment-summary-title\">\r\n      Order Summary\r\n    </div>\r\n\r\n    <div class=\"payment-summary-row\">\r\n      <div>Items (3):</div>\r\n      <div class=\"payment-summary-money\">\r\n      $${formatCurrency(productPriceCents)}</div>\r\n    </div>\r\n\r\n    <div class=\"payment-summary-row\">\r\n      <div>Shipping &amp; handling:</div>\r\n      <div class=\"payment-summary-money\">\r\n      ${formatCurrency(shippingPriceCents)}</div>\r\n    </div>\r\n\r\n    <div class=\"payment-summary-row subtotal-row\">\r\n      <div>Total before tax:</div>\r\n      <div class=\"payment-summary-money\">\r\n      $${formatCurrency(totalBeforeTaxCents)}</div>\r\n    </div>\r\n\r\n    <div class=\"payment-summary-row\">\r\n      <div>Estimated tax (10%):</div>\r\n      <div class=\"payment-summary-money\">\r\n      $${formatCurrency(taxCents)}</div>\r\n    </div>\r\n\r\n    <div class=\"payment-summary-row total-row\">\r\n      <div>Order total:</div>\r\n      <div class=\"payment-summary-money\">\r\n        $${formatCurrency(totalCents)}</div>\r\n    </div>\r\n\r\n    <button class=\"place-order-button button-primary add-to-cart-button js-place-order\">\r\n      Place your order\r\n    </button>\r\n\r\n  `;\r\n\r\n  document.querySelector('.js-payment-summary')\r\n    .innerHTML = paymentSummaryHTML;\r\n\r\n  document.querySelector('.js-place-order')\r\n    .addEventListener('click', async () => {\r\n      try {\r\n        const response = await fetch('https://supersimplebackend.dev/orders', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify({\r\n            cart: cart\r\n          })\r\n        });\r\n  \r\n        const order = await response.json();\r\n        addOrder(order);\r\n        \r\n      } catch (error) {\r\n        console.log('Unexpected error. Try again later.');\r\n      }\r\n      \r\n      window.location.href = 'orders.html';\r\n    });\r\n}"],"file":"paymentSummary.dev.js"}