"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.renderPaymentSummary=renderPaymentSummary;var _cart=require("../../data/cart.js"),_products=require("../../data/products.js"),_deliveryOptions=require("../../data/deliveryOptions.js"),_money=require("../utils/money.js"),_orders=require("../../data/orders.js");function renderPaymentSummary(){var t=0,a=0;_cart.cart.forEach(function(e){var r=(0,_products.getProduct)(e.productId);t+=r.priceCents*e.quantity;var n=(0,_deliveryOptions.getDeliveryOption)(e.deliveryOptionId);a+=n.priceCents});var e=t+a,r=.1*e,n=e+r,o='\n    <div class="payment-summary-title">\n      Order Summary\n    </div>\n\n    <div class="payment-summary-row">\n      <div>Items (3):</div>\n      <div class="payment-summary-money">\n      $'.concat((0,_money.formatCurrency)(t),'</div>\n    </div>\n\n    <div class="payment-summary-row">\n      <div>Shipping &amp; handling:</div>\n      <div class="payment-summary-money">\n      ').concat((0,_money.formatCurrency)(a),'</div>\n    </div>\n\n    <div class="payment-summary-row subtotal-row">\n      <div>Total before tax:</div>\n      <div class="payment-summary-money">\n      $').concat((0,_money.formatCurrency)(e),'</div>\n    </div>\n\n    <div class="payment-summary-row">\n      <div>Estimated tax (10%):</div>\n      <div class="payment-summary-money">\n      $').concat((0,_money.formatCurrency)(r),'</div>\n    </div>\n\n    <div class="payment-summary-row total-row">\n      <div>Order total:</div>\n      <div class="payment-summary-money">\n        $').concat((0,_money.formatCurrency)(n),'</div>\n    </div>\n\n    <button class="place-order-button button-primary add-to-cart-button js-place-order">\n      Place your order\n    </button>\n\n  ');document.querySelector(".js-payment-summary").innerHTML=o,document.querySelector(".js-place-order").addEventListener("click",function(){var r,n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(fetch("https://supersimplebackend.dev/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cart:_cart.cart})}));case 3:return r=e.sent,e.next=6,regeneratorRuntime.awrap(r.json());case 6:n=e.sent,(0,_orders.addOrder)(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("Unexpected error. Try again later.");case 13:window.location.href="orders.html";case 14:case"end":return e.stop()}},null,null,[[0,10]])})}
//# sourceMappingURL=paymentSummary.min.js.map
