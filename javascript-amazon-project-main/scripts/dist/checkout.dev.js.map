{"version":3,"sources":["checkout.js"],"names":["today","deliveryDate","add","console","log","format","cartSummaryHTML","cart","forEach","cartItem","productId","matchingProduct","products","product","id","deliveryOptionId","deliveryOption","deliveryOptions","option","deliveryDays","dateString","image","name","priceCents","quantity","deliveryOptionsHTML","html","priceString","isChecked","document","querySelector","innerHTML","querySelectorAll","link","addEventListener","dataset","container","remove","element"],"mappings":"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","sourcesContent":["import {cart, removeFromCart, updateDeliveryOption} from '../data/cart.js';\r\nimport { products } from '../data/products.js';\r\nimport {formatCurrency} from './utils/money.js';\r\nimport {hello} from 'https://unpkg.com/supersimpledev@1.0.1/hello.esm.js';\r\nimport dayjs from 'https://unpkg.com/dayjs@1.11.10/esm/index.js';\r\nimport {deliveryOptions} from '../data/deliveryOptions.js';\r\n\r\nhello();\r\n\r\nconst today = dayjs();\r\nconst deliveryDate = today.add(7, 'days');\r\nconsole.log(deliveryDate.format('dddd, MMMM, D'));\r\n\r\nlet cartSummaryHTML = '';\r\n\r\n\r\ncart.forEach((cartItem) => {\r\n  const productId = cartItem.productId;\r\n\r\n  let matchingProduct;\r\n\r\n  products.forEach((product) => {\r\n    if (product.id === productId) {\r\n      matchingProduct = product;\r\n    }\r\n  });\r\n\r\n  const deliveryOptionId = cartItem.deliveryOptionId;\r\n\r\n  let deliveryOption;\r\n\r\n  deliveryOptions.forEach((option) => {\r\n    if (option.id === deliveryOptionId) {\r\n      deliveryOption = option;\r\n    }\r\n  });\r\n\r\n  const today = dayjs();\r\n  const deliveryDate = today.add(\r\n    deliveryOption.deliveryDays,\r\n    'days'\r\n  );\r\n  const dateString = deliveryDate.format(\r\n    'dddd, MMMM D'\r\n  );\r\n\r\n  cartSummaryHTML += `\r\n  <div class=\"cart-item-container \r\n    js-cart-item-container-${matchingProduct.id}\">\r\n          <div class=\"delivery-date\">\r\n            Delivery date: ${dateString}\r\n          </div>\r\n\r\n          <div class=\"cart-item-details-grid\">\r\n            <img class=\"product-image\" src=\"${matchingProduct.image}\">\r\n\r\n            <div class=\"cart-item-details\">\r\n              <div class=\"product-name\">\r\n                ${matchingProduct.name}\r\n              </div>\r\n              <div class=\"product-price\">\r\n                $${formatCurrency(matchingProduct.priceCents)}\r\n              </div>\r\n              <div class=\"product-quantity\">\r\n                <span>\r\n                  Quantity: <span class=\"quantity-label\">${cartItem.quantity}</span>\r\n                </span>\r\n                <span class=\"update-quantity-link link-primary\">\r\n                  Update\r\n                </span>\r\n                <span class=\"delete-quantity-link link-primary js-delete-link\" data-product-id=\"${matchingProduct.id}\">\r\n                  Delete\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"delivery-options\">\r\n              <div class=\"delivery-options-title\">\r\n                Choose a delivery option:\r\n              </div>\r\n              ${deliveryOptionsHTML(matchingProduct, cartItem)}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n    `;\r\n});\r\n\r\nfunction deliveryOptionsHTML(matchingProduct, cartItem) {\r\n  let html = '';\r\n\r\n\r\n  deliveryOptions.forEach((deliveryOption) => {\r\n    const today = dayjs();\r\n    const deliveryDate = today.add(\r\n      deliveryOption.deliveryDays,\r\n      'days'\r\n    );\r\n    const dateString = deliveryDate.format(\r\n      'dddd, MMMM D'\r\n    );\r\n    \r\n    const priceString = deliveryOption.priceCents === 0 ? 'FREE' : `$${formatCurrency(deliveryOptions.priceCents)} -`;\r\n\r\n    const isChecked = deliveryOption.id === cartItem.deliveryOptionId;\r\n\r\n    html += `\r\n    <div class=\"delivery-option js-delivery-option\"\r\n    data-product-id=\"${matchingProduct.id}\" data-delivery-option-id=\"${deliveryOption.id}\">\r\n      <input type=\"radio\"\r\n      ${isChecked ? 'checked' : ''} \r\n      class=\"delivery-option-input\" name=\"delivery-option-${matchingProduct.id}\">\r\n      <div>\r\n        <div class=\"delivery-option-date\">\r\n          ${dateString}\r\n        </div>\r\n        <div class=\"delivery-option-price\">\r\n          $9.99 - Shipping\r\n        </div>\r\n      </div>\r\n    </div>\r\n    `\r\n  });\r\n\r\n  return html;\r\n}\r\n\r\ndocument.querySelector('.js-order-summary').innerHTML = cartSummaryHTML;\r\n\r\ndocument.querySelectorAll('.js-delete-link').forEach((link) => {\r\n  link.addEventListener('click', () => {\r\n    const productId = link.dataset.productId;\r\n    removeFromCart(productId);\r\n\r\n    const container = document.querySelector(\r\n      `.js-cart-item-container-${productId}`\r\n    );\r\n    container.remove();\r\n  });\r\n});\r\n\r\ndocument.querySelectorAll('.js-delivery-option')\r\n  .forEach((element) => {\r\n    element.addEventListener('click', () => {\r\n      const {productId, deliveryOptionId} = element.dataset;\r\n      updateDeliveryOption(productId, deliveryOptionId)\r\n    });\r\n  });"],"file":"checkout.dev.js"}