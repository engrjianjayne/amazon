{"version":3,"sources":["checkout.js"],"names":["_cart","require","_products","_money","_helloEsm","_index","_interopRequireDefault","_deliveryOptions","hello","today","deliveryDate","add","console","log","format","cartSummaryHTML","deliveryOptionsHTML","matchingProduct","cartItem","html","deliveryOptions","forEach","deliveryOption","dateString","deliveryDays","isChecked","priceCents","concat","formatCurrency","id","deliveryOptionId","cart","productId","products","product","option","image","name","quantity","document","querySelector","innerHTML","querySelectorAll","link","addEventListener","dataset","removeFromCart","remove"],"mappings":"aAAA,IAAAA,MAAAC,QAAA,mBACAC,UAAAD,QAAA,uBADAE,OAAAF,QAAA,oBAGAG,UAAAH,QAAA,uDAFAI,OAAAC,uBAAAL,QAAA,iDAIAM,iBAAAN,QAAA,uGAEA,EAAAG,UAAAI,SAEA,IAAMC,OAAQ,EAAAJ,OAAA,WALdK,aAAAD,MAAAE,IAAA,EAAA,QAOAC,QAAQC,IAAIH,aAAaI,OAAO,kBAEhC,IAAIC,gBAAkB,GA2EtB,SAASC,oBAAoBC,EAAiBC,GAC5C,IAAIC,EAAO,GAkCX,OA/BAC,iBAAAA,gBAAgBC,QAAQ,SAACC,GACvB,IAKMC,GALQ,EAAAlB,OAAA,WACaM,IACzBW,EAAeE,aACf,QAE8BV,OAC9B,gBAKIW,GAF4C,IAA9BH,EAAeI,YAAf,IAAAC,QAA+C,EAAAxB,OAAAyB,gBAAeR,iBAAAA,gBAAgBM,YAA9E,MAEFJ,EAAeO,KAAOX,EAASY,kBAEjDX,GAAI,yEAAAQ,OAGAF,EAAY,UAAY,GAHxB,iEAAAE,OAIoDV,EAAgBY,GAJpE,2EAAAF,OAOIJ,EAPJ,+IAiBCJ,EApHTY,MAAAA,KAAAV,QAAA,SAAAH,GAEA,IAEAN,EAFMH,EAAQS,EAAAc,UAYZC,UAAAA,SAASZ,QAAQ,SAACa,GALpBH,EAAKV,KAAQW,IACLA,EAAYd,KAKhB,IAECI,EAFGY,EAAeF,EAAWF,iBAShCV,iBAAAA,gBAAgBC,QAAQ,SAACc,GAJnBL,EAAAA,KAAgBA,IAElBR,EAAJa,KAIIb,IAKEZ,GALFY,EAAAA,OAAAA,WACDX,IAHHW,EAAAE,aASE,QADAF,OAGF,gBAIAP,iBAAe,oEAAAY,OA2CfV,EAAAY,GA3Ce,0EAAAF,OA8CfP,EA9Ce,sHAAAO,OAwDsBD,EAAfU,MAxDP,iHAAAT,OAYCV,EAAgBoB,KAZjB,wFAAAV,QAeE,EAAAxB,OAAAyB,gBAAeX,EAAgBS,YAfjC,2JAAAC,OAoFbT,EAAAoB,SApFa,2PAAAX,OAkFjBV,EAAAY,GAlFiB,sRAAAF,OAkCDX,oBAAoBC,EAAiBC,GAlCpC,oEAgFjBqB,SAASC,cAAc,qBAAqBC,UAAY1B,gBAExDwB,SAASG,iBAAiB,mBAAmBrB,QAAQ,SAACsB,GACpDA,EAAKC,iBAAiB,QAAS,WAC7B,IAAMZ,EAAYW,EAAKE,QAAQb,WAC/B,EAAAhC,MAAA8C,gBAAed,GAEGO,SAASC,cAAT,2BAAAb,OACWK,IAEnBe","file":"checkout.min.js","sourcesContent":["import {cart, removeFromCart} from '../data/cart.js';\r\nimport { products } from '../data/products.js';\r\nimport {formatCurrency} from './utils/money.js';\r\nimport {hello} from 'https://unpkg.com/supersimpledev@1.0.1/hello.esm.js';\r\nimport dayjs from 'https://unpkg.com/dayjs@1.11.10/esm/index.js';\r\nimport {deliveryOptions} from '../data/deliveryOptions.js';\r\n\r\nhello();\r\n\r\nconst today = dayjs();\r\nconst deliveryDate = today.add(7, 'days');\r\nconsole.log(deliveryDate.format('dddd, MMMM, D'));\r\n\r\nlet cartSummaryHTML = '';\r\n\r\n\r\ncart.forEach((cartItem) => {\r\n  const productId = cartItem.productId;\r\n\r\n  let matchingProduct;\r\n\r\n  products.forEach((product) => {\r\n    if (product.id === productId) {\r\n      matchingProduct = product;\r\n    }\r\n  });\r\n\r\n  const deliveryOptionId = cartItem.deliveryOptionId;\r\n\r\n  let deliveryOption;\r\n\r\n  deliveryOptions.forEach((option) => {\r\n    if (option.id === deliveryOptionId) {\r\n      deliveryOption = option;\r\n    }\r\n  });\r\n\r\n  const today = dayjs();\r\n  const deliveryDate = today.add(\r\n    deliveryOption.deliveryDays,\r\n    'days'\r\n  );\r\n  const dateString = deliveryDate.format(\r\n    'dddd, MMMM D'\r\n  );\r\n\r\n  cartSummaryHTML += `\r\n  <div class=\"cart-item-container \r\n    js-cart-item-container-${matchingProduct.id}\">\r\n          <div class=\"delivery-date\">\r\n            Delivery date: ${dateString}\r\n          </div>\r\n\r\n          <div class=\"cart-item-details-grid\">\r\n            <img class=\"product-image\" src=\"${matchingProduct.image}\">\r\n\r\n            <div class=\"cart-item-details\">\r\n              <div class=\"product-name\">\r\n                ${matchingProduct.name}\r\n              </div>\r\n              <div class=\"product-price\">\r\n                $${formatCurrency(matchingProduct.priceCents)}\r\n              </div>\r\n              <div class=\"product-quantity\">\r\n                <span>\r\n                  Quantity: <span class=\"quantity-label\">${cartItem.quantity}</span>\r\n                </span>\r\n                <span class=\"update-quantity-link link-primary\">\r\n                  Update\r\n                </span>\r\n                <span class=\"delete-quantity-link link-primary js-delete-link\" data-product-id=\"${matchingProduct.id}\">\r\n                  Delete\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"delivery-options\">\r\n              <div class=\"delivery-options-title\">\r\n                Choose a delivery option:\r\n              </div>\r\n              ${deliveryOptionsHTML(matchingProduct, cartItem)}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n    `;\r\n});\r\n\r\nfunction deliveryOptionsHTML(matchingProduct, cartItem) {\r\n  let html = '';\r\n\r\n\r\n  deliveryOptions.forEach((deliveryOption) => {\r\n    const today = dayjs();\r\n    const deliveryDate = today.add(\r\n      deliveryOption.deliveryDays,\r\n      'days'\r\n    );\r\n    const dateString = deliveryDate.format(\r\n      'dddd, MMMM D'\r\n    );\r\n    \r\n    const priceString = deliveryOption.priceCents === 0 ? 'FREE' : `$${formatCurrency(deliveryOptions.priceCents)} -`;\r\n\r\n    const isChecked = deliveryOption.id === cartItem.deliveryOptionId;\r\n\r\n    html += `\r\n    <div class=\"delivery-option\">\r\n      <input type=\"radio\"\r\n      ${isChecked ? 'checked' : ''} \r\n      class=\"delivery-option-input\" name=\"delivery-option-${matchingProduct.id}\">\r\n      <div>\r\n        <div class=\"delivery-option-date\">\r\n          ${dateString}\r\n        </div>\r\n        <div class=\"delivery-option-price\">\r\n          $9.99 - Shipping\r\n        </div>\r\n      </div>\r\n    </div>\r\n    `\r\n  });\r\n\r\n  return html;\r\n}\r\n\r\ndocument.querySelector('.js-order-summary').innerHTML = cartSummaryHTML;\r\n\r\ndocument.querySelectorAll('.js-delete-link').forEach((link) => {\r\n  link.addEventListener('click', () => {\r\n    const productId = link.dataset.productId;\r\n    removeFromCart(productId);\r\n\r\n    const container = document.querySelector(\r\n      `.js-cart-item-container-${productId}`\r\n    );\r\n    container.remove();\r\n  });\r\n});"]}