{"version":3,"sources":["checkout.js"],"names":["_cart","require","_products","_money","_helloEsm","_index","_interopRequireDefault","_deliveryOptions","hello","today","deliveryDate","add","renderOrderSummary","cartSummaryHTML","cart","cartItem","console","matchingProduct","log","productId","products","forEach","product","deliveryOption","deliveryOptionId","deliveryOptions","option","deliveryDays","concat","id","priceCents","image","name","formatCurrency","quantity","html","dateString","format","isChecked","deliveryOptionsHTML","document","querySelector","innerHTML","querySelectorAll","link","addEventListener","dataset","removeFromCart","remove","element","_element$dataset","updateDeliveryOption"],"mappings":"aAAA,IAAAA,MAAAC,QAAA,mBACAC,UAAAD,QAAA,uBADAE,OAAAF,QAAA,oBAGAG,UAAAH,QAAA,uDAFAI,OAAAC,uBAAAL,QAAA,iDAIAM,iBAAAN,QAAA,uGAEA,EAAAG,UAAAI,SAEA,IAAMC,OAAQ,EAAAJ,OAAA,WALdK,aAAAD,MAAAE,IAAA,EAAA,QASA,SAASC,qBAEP,IAAIC,EAAkB,GALxBC,MAAAA,KAAMJ,QAAAA,SAAYK,GAClBC,IAEAC,EAFQC,EAAIR,EAAAS,UAYRC,UAAAA,SAASC,QAAQ,SAACC,GALpBR,EAAKO,KAAQF,IACLA,EAAYJ,KAKhB,IAECQ,EAFGD,EAAeH,EAAWK,iBAShCC,iBAAAA,gBAAgBJ,QAAQ,SAACK,GAJnBF,EAAAA,KAAgBA,IAElBD,EAAJG,KAIIH,IAKEb,GALFa,EAAAA,OAAAA,WACDZ,IAHHY,EAAAI,aASE,QADAJ,OAGF,gBAIAV,GAAe,wEAAAe,OA2CfX,EAAAY,GA3Ce,8EAAAD,OA8CfH,EA9Ce,4HAAAG,OAwDsBE,EAAfC,MAxDP,uHAAAH,OAYCX,EAAgBe,KAZjB,8FAAAJ,QAeE,EAAAzB,OAAA8B,gBAAehB,EAAgBa,YAfjC,mKAAAF,OAqFbb,EAAAmB,SArFa,qQAAAN,OAmFjBX,EAAAY,GAnFiB,wSAAAD,OA0CjB,SAA6BX,EAAiBF,GAC5C,IAAIoB,EAAO,GAmCX,OAhCAV,iBAAAA,gBAAgBJ,QAAQ,SAACE,GACvB,IAKMa,GALQ,EAAA/B,OAAA,WACaM,IACzBY,EAAeI,aACf,QAE8BU,OAC9B,gBAKIC,GAF4C,IAA9Bf,EAAeO,YAAf,IAAAF,QAA+C,EAAAzB,OAAA8B,gBAAeR,iBAAAA,gBAAgBK,YAA9E,MAEFP,EAAeM,KAAOd,EAASS,kBAEjDW,GAAI,mFAAAP,OAEeX,EAAgBY,GAF/B,+BAAAD,OAE+DL,EAAeM,GAF9E,6CAAAD,OAIAU,EAAY,UAAY,GAJxB,mEAAAV,OAKoDX,EAAgBY,GALpE,iFAAAD,OAQIQ,EARJ,6JAkBCD,EAyBVI,CAAAtB,EAAAF,GAvGkB,4EAiFjByB,SAASC,cAAc,qBAAqBC,UAAY7B,EAExD2B,SAASG,iBAAiB,mBAAmBtB,QAAQ,SAACuB,GACpDA,EAAKC,iBAAiB,QAAS,WAC7B,IAAM1B,EAAYyB,EAAKE,QAAQ3B,WAC/B,EAAAnB,MAAA+C,gBAAe5B,GAEGqB,SAASC,cAAT,2BAAAb,OACWT,IAEnB6B,aAIdR,SAASG,iBAAiB,uBACvBtB,QAAQ,SAAC4B,GACRA,EAAQJ,iBAAiB,QAAS,WAAM,IAAAK,EACAD,EAAQH,QAAvC3B,EAD+B+B,EAC/B/B,UAAWK,EADoB0B,EACpB1B,kBAClB,EAAAxB,MAAAmD,sBAAqBhC,EAAWK,GAChCZ,yBAzIRI,QAAQE,IAAIR,aAAa2B,OAAO,kBA8IhCzB","file":"checkout.min.js","sourcesContent":["import {cart, removeFromCart, updateDeliveryOption} from '../data/cart.js';\r\nimport { products } from '../data/products.js';\r\nimport {formatCurrency} from './utils/money.js';\r\nimport {hello} from 'https://unpkg.com/supersimpledev@1.0.1/hello.esm.js';\r\nimport dayjs from 'https://unpkg.com/dayjs@1.11.10/esm/index.js';\r\nimport {deliveryOptions} from '../data/deliveryOptions.js';\r\n\r\nhello();\r\n\r\nconst today = dayjs();\r\nconst deliveryDate = today.add(7, 'days');\r\nconsole.log(deliveryDate.format('dddd, MMMM, D'));\r\n\r\nfunction renderOrderSummary() {\r\n\r\n  let cartSummaryHTML = '';\r\n\r\n\r\n  cart.forEach((cartItem) => {\r\n    const productId = cartItem.productId;\r\n\r\n    let matchingProduct;\r\n\r\n    products.forEach((product) => {\r\n      if (product.id === productId) {\r\n        matchingProduct = product;\r\n      }\r\n    });\r\n\r\n    const deliveryOptionId = cartItem.deliveryOptionId;\r\n\r\n    let deliveryOption;\r\n\r\n    deliveryOptions.forEach((option) => {\r\n      if (option.id === deliveryOptionId) {\r\n        deliveryOption = option;\r\n      }\r\n    });\r\n\r\n    const today = dayjs();\r\n    const deliveryDate = today.add(\r\n      deliveryOption.deliveryDays,\r\n      'days'\r\n    );\r\n    const dateString = deliveryDate.format(\r\n      'dddd, MMMM D'\r\n    );\r\n\r\n    cartSummaryHTML += `\r\n    <div class=\"cart-item-container \r\n      js-cart-item-container-${matchingProduct.id}\">\r\n            <div class=\"delivery-date\">\r\n              Delivery date: ${dateString}\r\n            </div>\r\n\r\n            <div class=\"cart-item-details-grid\">\r\n              <img class=\"product-image\" src=\"${matchingProduct.image}\">\r\n\r\n              <div class=\"cart-item-details\">\r\n                <div class=\"product-name\">\r\n                  ${matchingProduct.name}\r\n                </div>\r\n                <div class=\"product-price\">\r\n                  $${formatCurrency(matchingProduct.priceCents)}\r\n                </div>\r\n                <div class=\"product-quantity\">\r\n                  <span>\r\n                    Quantity: <span class=\"quantity-label\">${cartItem.quantity}</span>\r\n                  </span>\r\n                  <span class=\"update-quantity-link link-primary\">\r\n                    Update\r\n                  </span>\r\n                  <span class=\"delete-quantity-link link-primary js-delete-link\" data-product-id=\"${matchingProduct.id}\">\r\n                    Delete\r\n                  </span>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"delivery-options\">\r\n                <div class=\"delivery-options-title\">\r\n                  Choose a delivery option:\r\n                </div>\r\n                ${deliveryOptionsHTML(matchingProduct, cartItem)}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n      `;\r\n  });\r\n\r\n  function deliveryOptionsHTML(matchingProduct, cartItem) {\r\n    let html = '';\r\n\r\n\r\n    deliveryOptions.forEach((deliveryOption) => {\r\n      const today = dayjs();\r\n      const deliveryDate = today.add(\r\n        deliveryOption.deliveryDays,\r\n        'days'\r\n      );\r\n      const dateString = deliveryDate.format(\r\n        'dddd, MMMM D'\r\n      );\r\n      \r\n      const priceString = deliveryOption.priceCents === 0 ? 'FREE' : `$${formatCurrency(deliveryOptions.priceCents)} -`;\r\n\r\n      const isChecked = deliveryOption.id === cartItem.deliveryOptionId;\r\n\r\n      html += `\r\n      <div class=\"delivery-option js-delivery-option\"\r\n      data-product-id=\"${matchingProduct.id}\" data-delivery-option-id=\"${deliveryOption.id}\">\r\n        <input type=\"radio\"\r\n        ${isChecked ? 'checked' : ''} \r\n        class=\"delivery-option-input\" name=\"delivery-option-${matchingProduct.id}\">\r\n        <div>\r\n          <div class=\"delivery-option-date\">\r\n            ${dateString}\r\n          </div>\r\n          <div class=\"delivery-option-price\">\r\n            $9.99 - Shipping\r\n          </div>\r\n        </div>\r\n      </div>\r\n      `\r\n    });\r\n\r\n    return html;\r\n  }\r\n\r\n  document.querySelector('.js-order-summary').innerHTML = cartSummaryHTML;\r\n\r\n  document.querySelectorAll('.js-delete-link').forEach((link) => {\r\n    link.addEventListener('click', () => {\r\n      const productId = link.dataset.productId;\r\n      removeFromCart(productId);\r\n\r\n      const container = document.querySelector(\r\n        `.js-cart-item-container-${productId}`\r\n      );\r\n      container.remove();\r\n    });\r\n  });\r\n\r\n  document.querySelectorAll('.js-delivery-option')\r\n    .forEach((element) => {\r\n      element.addEventListener('click', () => {\r\n        const {productId, deliveryOptionId} = element.dataset;\r\n        updateDeliveryOption(productId, deliveryOptionId);\r\n        renderOrderSummary();\r\n      });\r\n    });\r\n}\r\n\r\nrenderOrderSummary();"]}